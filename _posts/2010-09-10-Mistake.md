---
layout: post
title: "Assignment的错误"
categories: [melb] 
tags: [mistake]
---

今天一个assignment的成绩发布，我只拿了7.2分（10分满分），有点郁闷，主要是不知道自己错在哪里。然后，发了封email给老师，老师详细地解释了我的错误。现在心里舒服多了，知道自己错在哪，就好。。。以后要好好加油。

下面我来讲讲我的错误，

Hi Hengfeng,

I clarified in class that the use of the concurrency package was not
allowed. Moreover, in your code you use a thread pool that is implemented
in the concurrency package and given by the ExecutorService class.

Explicit use of threading means that Thread must be your smaller level of
abstraction, part of the aim of the assignment was to getting familiar
with using the java.lang.Thread class. This is why it is not an explicit
use of multi-threading (there is no direct management of thread
instances). Some of the other students have implemented their own thread
pool and and managed threads directly. This was the only option available
with thread pools.

For what concerns the socket management the client side has been properly
designed and implemented, but the problems reside in the server side:
1. In the DictServer constructor there is try-catch used to initialize the
ServerSocket instance, if the operation fails server program continues to
run and allocate resources that are not need needed.
2. In the service method, later on, there is the following code:

while(true){
  // create a new socket for connecting client
  Socket socket = null;
  try {
      // listening to the connection from clients. If a request of
      // come from client, then open a new socket to accept it.
      // Hence, a client connection is established.
      socket = serverSocket.accept();
 
      // create a thread for every connection, and complete the
      // dictionary search function.
      executorService.execute(new SendReceiveThread(socket,
      dictAddr, indexAddr, secondIndexAddr);
  } catch (Exception ex ) {
      // this exception might be generated by the creation of
      // the socket which is accepted by the socket server
      System.out.println("Error while opening the socket: " +
      ex.getMessage());
  }
}


if the server socket is not initialized this loop will continuously
generate exceptions without any purpose. This is wrong management of the
ServerSocket class and it ultimately comes down to on how exception
management on sockets has been implemented.

I hope this will help in understanding the marking. The comments mostly
relate to the core section of the Marking scheme, which is the most
important since it was the part that was expected to be implemented fully
and without flaws. As you surely have noticed, the constraint about having
the core section fully completed and flawless in order to get the other
marks has been relaxed and not considered, which in the end has allowed
everyone to get more marks.

Christian

这是老师发给我的原信。。。主要有2点错误

第一点，也是最严重的一点（No explicit multithreading），他的要求是用最基本的threads去实现所有的功能，不准用高级的concurrency package。我用了ExecutorService的FixedThreadPool，来运行Threads。。。其实应该自己用最基本的方法，去实现这个fixed thread pool。。。大错啊，难怪我core的部分，只得了4.7分，失误，失误。。。

第二点，对于sockets的异常处理，没有做的很好（Exception management on sockets）。还是不够细心啊，老师说的对，如果serverSocket的初始化没有成功，我的程序还是会继续进行下去。而且我在调用server的方法的时候是，

new DictServer(port).service(dictAddr, indexAddr,secondIndexAddr);

这样，如果DictServer初始化的时候，发生了错误，那么还是会继续调用service的方法，这样是很大的错误。

而且我发现，我的serversocket和clientsocket，都没有close。。。

所以，这次是一个很大的教训，这门课的下一个project和exam，我都要好好努力，争取弥补上这次的错误。。。